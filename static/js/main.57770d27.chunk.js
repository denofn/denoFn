(this["webpackJsonpregistry-ui"]=this["webpackJsonpregistry-ui"]||[]).push([[0],{31:function(e,t,a){e.exports=a.p+"static/media/denofn_transparent.bc01bd66.png"},38:function(e,t,a){e.exports=a(66)},46:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var r=a(3),n=a(4),i=a(0),l=a.n(i),c=a(7),o=a.n(c),s=(a(46),a(2)),m=a(1);function u(e){return l.a.createElement("svg",Object.assign({viewBox:"0 0 24 24",width:24,height:24},e),l.a.createElement("path",{className:"prefix__heroicon-ui",d:"M5.41 11H21a1 1 0 010 2H5.41l5.3 5.3a1 1 0 01-1.42 1.4l-7-7a1 1 0 010-1.4l7-7a1 1 0 011.42 1.4L5.4 11z"}))}var d=a(31),g=a.n(d);function b(e){var t=e.title,a=e.onClick;return l.a.createElement("button",{onClick:a,className:Object(m.a)({boxSizing:"border-box",backgroundColor:"transparent",color:"white",borderColor:"white",fontWeight:"bold",borderWidth:"1px",borderStyle:"solid",borderRadius:"0.25rem",padding:"7px 1rem",cursor:"pointer",lineHeight:"1rem",fontSize:"1rem",":hover":{color:"black",backgroundColor:"white",borderColor:"transparent"}})},t)}var p=l.a.createContext([{current:"view-all"},function(){}]);function f(e){var t=e.children,a=l.a.useState({current:"view-all"});return l.a.createElement(p.Provider,{value:a},t)}function h(e){var t=e.title,a=void 0===t?"denoFn":t,n=l.a.useContext(p),i=Object(s.a)(n,2),c=i[0],o=c.current,d=c.manage,f=i[1],h=Object(r.b)(),v=h.isAuthenticated,E=h.loginWithRedirect;return l.a.createElement("header",{className:Object(m.a)({display:"flex",backgroundColor:"rgb(0, 0, 0)",color:"white",borderColor:"rgb(237,242,247)",borderBottomStyle:"solid",borderBottomWidth:"1px",height:"4rem"})},l.a.createElement("div",{className:Object(m.a)({display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginLeft:"auto",marginRight:"auto",width:"100%",paddingLeft:"1.5rem",paddingRight:"1.5rem"})},l.a.createElement("div",{className:Object(m.a)({display:"flex"})},"manage"===o||"create"===o?l.a.createElement(u,{onClick:function(){return f({current:"view-all"})},className:Object(m.a)({display:"inline-block",lineHeight:"1.5rem",marginTop:"1.25rem",marginBottom:"1.25rem",marginRight:"0.5rem",cursor:"pointer",fill:"white"})}):l.a.createElement("img",{className:Object(m.a)({marginTop:".5rem",height:"3rem",width:"3rem",lineHeight:"3rem",marginRight:".5rem"}),src:g.a,alt:"denoFn logo"}),l.a.createElement("h4",{className:Object(m.a)({display:"inline-block",lineHeight:"1.5rem",marginTop:"1.25rem",marginBottom:"1.25rem",textTransform:"lowercase"})},"manage"===o?d:"create"===o?"create fn":a)),l.a.createElement("div",{className:Object(m.a)({marginTop:"1rem"})},!v&&l.a.createElement(b,{title:"Sign in",onClick:function(){return E()}}))))}var v=a(13);function E(e){var t=e.children;return l.a.createElement("div",{className:Object(m.a)({padding:"1.5rem"})},t)}var w=Object(m.b)({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}});function y(e){var t=e.dim,a=e.thickness;return l.a.createElement("div",{className:Object(m.a)({display:"inline-block",transitionTimingFunction:"linear",width:t||"1.5rem",height:t||"1.5rem",borderWidth:null!==a&&void 0!==a?a:".25rem",borderColor:"#edf2f7",borderStyle:"solid",borderTopWidth:null!==a&&void 0!==a?a:".25rem",borderTopColor:"rgb(26, 32, 44)",borderRadius:"9999px",animation:"".concat(w," 1.5s linear infinite")})})}var O=l.a.memo((function(e){var t=e.className,a=e.loading,r=e.disabled,n=e.title,i=e.onClick;return l.a.createElement("button",{className:"".concat(Object(m.a)({backgroundColor:"transparent",fontWeight:"bold",padding:".5rem 1rem",borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(26, 32, 44)",borderRadius:".25rem",lineHeight:"1rem",fontSize:"1rem",cursor:"pointer",":hover":{backgroundColor:"rgb(26, 32, 44) !important",color:"white",borderColor:"transparent"},":disabled":{color:a?"rgb(26, 32, 44)":"rgba(26,32,44,.5)",borderColor:a?"rgb(26, 32, 44)":"rgba(26,32,44,.5)",cursor:"not-allowed"},selectors:{"&:disabled:hover":{backgroundColor:"transparent !important",borderColor:a?"rgb(26, 32, 44)":"rgba(26,32,44,.5)"}}})).concat(t?" ".concat(t):""),disabled:null!==r&&void 0!==r&&r,onClick:i},l.a.createElement("div",{className:Object(m.a)({display:"flex",alignItems:"center"})},a&&l.a.createElement("span",{className:Object(m.a)({marginRight:".33rem"})},l.a.createElement(y,{dim:".66rem",thickness:".125rem"})),n))})),x=l.a.memo((function(){var e=l.a.useContext(p),t=Object(s.a)(e,2)[1];return l.a.createElement(O,{title:"Create Fn",onClick:function(){return t({current:"create"})}})}));function j(e){var t=e.title,a=e.message;return l.a.createElement("div",{className:Object(m.a)({paddingLeft:"1rem",paddingRight:"1rem",color:"rgb(197,48,48)",borderStyle:"solid",borderColor:"rgb(252,129,129)",borderRadius:".25rem",borderWidth:"1px",paddingTop:".75rem",paddingBottom:".75rem",position:"relative",backgroundColor:"rgb(255,245,245)"}),role:"alert"},l.a.createElement("strong",{className:Object(m.a)({fontFamily:"'Rubik', sans-serif",fontWeight:"bold",display:"block",lineHeight:"1.5rem"})},t),l.a.createElement("span",null,a))}function C(e){var t=e.children;return l.a.createElement("div",{className:Object(m.a)({width:"100%",marginLeft:"auto",marginRight:"auto",display:"flex",alignItems:"center",justifyContent:"center"})},t)}function N(e){return l.a.createElement(C,null,l.a.createElement(j,e))}const k={display:"flex",alignItems:"flex-start",flexDirection:"column",justifyContent:"space-between"},S={display:"block"},W=l.a.memo((function({className:e,children:t,onClick:a,padding:r,flex:n=!0}){const i=null!==a&&void 0!==a?a:function(){},c=a?{cursor:"pointer"}:{};return l.a.createElement("div",{onClick:i,className:`${Object(m.a)({...c,...n?k:S,backgroundColor:"white",boxSizing:"border-box",borderRadius:".25rem",minHeight:"6rem",padding:null!==r&&void 0!==r?r:"1rem",boxShadow:"0 10px 15px -3px rgba(0,0,0,.1), 0 4px 6px -2px rgba(0,0,0,0.05)"})}${e?` ${e}`:""}`},t)}));var H=l.a.memo((function(e){var t=e.className,a=e.status,r=e.statusText,n=Object(s.a)(r,2),i=n[0],c=n[1];return l.a.createElement("div",{className:"".concat(t?"".concat(t," "):"").concat(Object(m.a)({display:"inline-block",borderRadius:"9999px",fontWeight:"bold",fontSize:".75rem",padding:".25rem .5rem",lineHeight:"1rem",textTransform:"uppercase",backgroundColor:a?"rgb(56,178,172)":"rgb(245,101,101)",color:"white"}))},a?i:c)}));function R(e){var t=e.children;return l.a.createElement("span",{className:Object(m.a)({wordBreak:"break-all"})},t)}var T=l.a.memo((function(e){var t=e.f,a=e.status,r=l.a.useContext(p),n=Object(s.a)(r,2)[1];return l.a.createElement(W,{onClick:function(){return n({current:"manage",manage:t})},key:t},l.a.createElement(R,null,t),l.a.createElement(H,{className:Object(m.a)({marginTop:".75rem"}),status:a,statusText:["warm","cold"]}))}));function F(){return l.a.createElement(C,null,l.a.createElement(y,null),l.a.createElement("h3",{className:Object(m.a)({display:"inline-block",lineHeight:"2rem",margin:"0",marginLeft:".5rem",alignSelf:"top"})},"Loading..."))}function I(e){var t=e.children;return l.a.createElement("div",{className:Object(m.a)({width:"100%",display:"grid",gridGap:"1rem",gridTemplateColumns:"repeat(auto-fill, minmax(252px, 1fr))"})},t)}function B(){return window.location.origin}function L(e){return"".concat(B(),"/api/v1").concat(e)}function z(){var e=Object(r.b)(),t=e.isAuthenticated,a=e.user;return t?l.a.createElement(A,{isAuthenticated:!0,user:a}):l.a.createElement("div",null)}function A(e){var t=e.isAuthenticated,a=e.user,r=Object(n.e)(L("/functions"),{headers:{"x-denofn-user":null===a||void 0===a?void 0:a.sub}}),i=r.get,c=r.loading,o=r.error,s=r.data;return l.a.useEffect((function(){t&&i()}),[t,i]),l.a.createElement(E,null,c&&l.a.createElement(F,null),o&&l.a.createElement(N,{title:"Error!",message:o.message}),!c&&!o&&!!s&&l.a.createElement(l.a.Fragment,null,l.a.createElement(I,null,[].concat(Object(v.a)(Object.keys(s).map((function(e){return l.a.createElement(T,{status:s[e],f:e,key:e})}))),[l.a.createElement(W,{key:"denofn-createNewFunctionAction-viewallfunctions"},l.a.createElement("div",{className:Object(m.a)({width:"100%",display:"flex",alignItems:"center",justifyContent:"center",height:"4rem"})},l.a.createElement(x,null)))]))))}var $=a(32),_=a.n($),D=a(33),M=a.n(D),J=a(16),V=a(34),P=a.n(V),U=(a(61),a(62),l.a.memo((function(e){var t=e.index,a=e.dispatch;return l.a.createElement("div",{className:Object(m.a)({margin:"1.5rem 0"})},l.a.createElement("div",{className:Object(m.a)({margin:"1.5rem 0 0.75rem",fontWeight:"bold"})},"index.ts"),l.a.createElement(P.a,{value:"".concat(t),onValueChange:function(e){a({type:"index",value:e})},highlight:function(e){return Object(J.highlight)(e,J.languages.ts,"ts")},onBlur:function(){var e=_.a.format("".concat(t),{semi:!0,printWidth:100,parser:"typescript",plugins:[M.a]});a({type:"index",value:e})},padding:4,className:Object(m.a)({fontFamily:"'Fira Code', monospace"})}))}))),q=a(37);function K(e){return{label:e,value:e}}function X(e){return(null!==e&&void 0!==e?e:[]).map((function(e){return e.value}))}var G=l.a.memo((function(e){var t,a=e.dispatch,r=e.registry,n=l.a.useState(""),i=Object(s.a)(n,2),c=i[0],o=i[1],u=l.a.useState(null===r||void 0===r?void 0:r.whitelist.map(K)),d=Object(s.a)(u,2),g=d[0],b=d[1];function p(e){b(e),a({type:"whitelist",value:X(e)})}return l.a.createElement("div",{className:Object(m.a)({margin:"1.5rem 0"})},l.a.createElement("div",{className:Object(m.a)({fontWeight:"bold",marginBottom:"0.75rem"})},"URL Whitelist"),l.a.createElement(q.a,{components:{DropdownIndicator:null},inputValue:c,isClearable:!0,isMulti:!0,menuIsOpen:!1,placeholder:"Enter the domains you want to send requests to here...",value:g,onChange:p,onKeyDown:function(e){if(c)switch(e.key){case"Enter":case"Tab":p([].concat(Object(v.a)(null!==g&&void 0!==g?g:[]),[K(c)])),o(""),e.preventDefault()}},onInputChange:function(e){o(e)}}),l.a.createElement("div",{className:Object(m.a)({marginTop:"1.5rem",display:"flex",alignItems:"center"})},l.a.createElement("label",{htmlFor:"warmupOnStart",className:Object(m.a)({marginRight:".5rem",fontWeight:"bold"})},"Post-registration warmup"),l.a.createElement("input",{type:"checkbox",checked:null!==(t=null===r||void 0===r?void 0:r.warmupOnStart)&&void 0!==t&&t,id:"warmupOnStart",onChange:function(e){a({type:"warmupOnStart",value:!(null===r||void 0===r?void 0:r.warmupOnStart)})}})))}));function Q(e,t){switch(t.type){case"scriptName":return{...e,scriptName:t.value};case"index":return{...e,index:t.value};case"warmupOnStart":return{...e,registry:{...e.registry,warmupOnStart:t.value}};case"whitelist":return{...e,registry:{...e.registry,whitelist:t.value}};default:return e}}function Y({reload:e}){const{user:t}=Object(r.b)(),[a,i]=l.a.useReducer(Q,{scriptName:"",index:'import {\n  createHandler,\n  createResponse,\n} from "https://cdn.jsdelivr.net/gh/jeroenptrs/denofn@1.0.0/packages/micro/functions/mod.ts";\n\nexport default createHandler(async (req, res) => {\n  return createResponse({\n    body: "Hello, World",\n  });\n});\n',registry:{whitelist:[],warmupOnStart:!1}}),{post:c,loading:o,response:s,error:u,data:d}=Object(n.e)(L("/functions"),{headers:{"x-denofn-user":null===t||void 0===t?void 0:t.sub}});return l.a.createElement(l.a.Fragment,null,u&&l.a.createElement(C,null,l.a.createElement(N,{title:"Something went wrong while creating your new function",message:d})),l.a.createElement(W,{padding:"1.5rem",flex:!1,className:Object(m.a)({minHeight:"calc(75vh - 7.5rem)",marginTop:u?"1.5rem":"0"})},l.a.createElement("div",{className:Object(m.a)({display:"flex",alignItems:"center",justifyContent:"space-between",margin:"0",marginBottom:"1.5rem"})},l.a.createElement("input",{className:Object(m.a)({width:"100%",padding:".25rem .5rem",lineHeight:"1.5rem",borderStyle:"none",backgroundColor:"transparent",appearance:"none",fontSize:"1.5rem",fontFamily:"'Rubik', sans-serif",fontWeight:"bold","::placeholder":{fontFamily:"'Karla', sans-serif",fontWeight:"initial"}}),value:a.scriptName,onChange:function(e){i({value:e.target.value,type:"scriptName"})},placeholder:"Enter your scriptname here",autoFocus:!0}),l.a.createElement(O,{disabled:""===a.scriptName,title:"Create",onClick:async function(){await c(a),s.ok&&e()},loading:o,className:Object(m.a)({marginLeft:"1.5rem"})})),l.a.createElement("hr",{color:"#e2e8f0"}),l.a.createElement(G,{registry:a.registry,dispatch:i}),l.a.createElement(U,{index:a.index,dispatch:i})))}function Z(){var e=l.a.useContext(p),t=Object(s.a)(e,2)[1],a=l.a.useCallback((function(){t({current:"view-all"})}),[t]);return l.a.createElement(E,null,l.a.createElement(Y,{reload:a}))}var ee=a(17),te=a.n(ee),ae=a(36);function re(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",width:24,height:24},e),i.createElement("path",{className:"prefix__heroicon-ui",d:"M19 6.41L8.7 16.71a1 1 0 11-1.4-1.42L17.58 5H14a1 1 0 010-2h6a1 1 0 011 1v6a1 1 0 01-2 0V6.41zM17 14a1 1 0 012 0v5a2 2 0 01-2 2H5a2 2 0 01-2-2V7c0-1.1.9-2 2-2h5a1 1 0 010 2H5v12h12v-5z"}))}function ne(e,t){switch(t.type){case"index":return{...e,index:t.value};case"warmupOnStart":return{...e,registry:{...e.registry,warmupOnStart:t.value}};case"whitelist":return{...e,registry:{...e.registry,whitelist:t.value}};default:return e}}function ie({scriptName:e,isWarmedUp:t,reload:a,...i}){const{user:c}=Object(r.b)(),[o,s]=l.a.useReducer(ne,{index:i.index,registry:i.registry}),{post:u,loading:d,response:g}=Object(n.e)(L("/functions"),{headers:{"x-denofn-user":null===c||void 0===c?void 0:c.sub}}),b=(p={index:i.index,registry:i.registry},f=o,p.index===f.index&&p.registry.warmupOnStart===f.registry.warmupOnStart&&JSON.stringify(p.registry.whitelist)===JSON.stringify(f.registry.whitelist));var p,f;return l.a.createElement(W,{padding:"1.5rem",flex:!1,className:Object(m.a)({minHeight:"calc(75vh - 7.5rem)"})},l.a.createElement("div",{className:Object(m.a)({display:"flex",alignItems:"center",justifyContent:"space-between",margin:"0",marginBottom:"1.5rem"})},l.a.createElement("div",{className:Object(m.a)({display:"flex",alignItems:"center"})},l.a.createElement("h2",{className:Object(m.a)({margin:"0",lineHeight:"1.5rem",fontSize:"1.5rem"})},e),l.a.createElement("a",{href:`${B()}/${e}`,target:"_blank",rel:"noopener noreferrer",className:Object(m.a)({height:"1.5rem",width:"1.5rem"})},l.a.createElement(re,{className:Object(m.a)({marginLeft:".25rem",fill:"rgba(26, 32, 44, 0.5)",alignSelf:"flex-start"})})),l.a.createElement(H,{className:Object(m.a)({marginLeft:".75rem"}),status:null!==t&&void 0!==t&&t,statusText:["WARM","COLD"]})),l.a.createElement(O,{disabled:b,title:"Save Changes",onClick:async function(){await u(`/${e}`,o),g.ok&&a()},loading:d})),l.a.createElement("hr",{color:"#e2e8f0"}),l.a.createElement(G,{registry:o.registry,dispatch:s}),l.a.createElement(U,{index:o.index,dispatch:s}))}function le(){var e=Object(r.b)().user,t=l.a.useContext(p),a=Object(s.a)(t,1)[0].manage,i=Object(n.e)(L("/functions/".concat(a)),{headers:{"x-denofn-user":null===e||void 0===e?void 0:e.sub}}),c=i.get,o=i.loading,m=i.error,u=i.data,d=i.response,g=l.a.useCallback(Object(ae.a)(te.a.mark((function e(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:case"end":return e.stop()}}),e)}))),[c]);return l.a.useEffect((function(){g()}),[g]),l.a.createElement(E,null,o&&l.a.createElement(F,null),m&&l.a.createElement(N,{title:"Error!",message:m.message}),!o&&!m&&!!u&&d.ok&&l.a.createElement(ie,Object.assign({scriptName:"".concat(a)},u,{reload:g})))}var ce=function(){var e=l.a.useContext(p),t=function(e){switch(e){case"view-all":return function(){return l.a.createElement(z,null)};case"create":return function(){return l.a.createElement(Z,null)};case"manage":return function(){return l.a.createElement(le,null)};default:return function(){return l.a.createElement("div",null)}}}(Object(s.a)(e,1)[0].current);return l.a.createElement(l.a.Fragment,null,l.a.createElement(h,null),l.a.createElement(t,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(r.a,{domain:"denofn.eu.auth0.com",clientId:"b43779wH6t2S4r7TXXWDWQzC56kg5voI",redirectUri:window.location.origin},l.a.createElement(f,null,l.a.createElement(n.c,{options:{cachePolicy:n.a.NO_CACHE}},l.a.createElement(ce,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);